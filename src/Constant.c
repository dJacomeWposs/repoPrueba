//-----------------------------------------------------------------------------
//  File          : constant.c
//  Module        :
//  Description   : Include Global constants & related routines.
//  Author        : Lewis
//  Notes         :
//
// ============================================================================
// | Naming conventions                                                       |
// | ~~~~~~~~~~~~~~~~~~                                                       |
// |        Struct define : Leading T                                         |
// |         Struct/Array : Leading s                                         |
// |             Constant : Leading K                                         |
// |      Global Variable : Leading g  (variable use outside one C file)      |
// |                                                                          |
// |   BYTE( 8 Bits) size : Leading b                                         |
// |   CHAR( 8 Bits) size : Leading c                                         |
// |   WORD(16 Bits) size : Leading w                                         |
// |  DWORD(32 Bits) size : Leading d                                         |
// |    int(32 Bits) size : Leading i                                         |
// | DDWORD(64 Bits) size : Leading dd                                        |
// |              Pointer : Leading p                                         |
// |                                                                          |
// |    Function argument : Leading a                                         |
// |       Local Variable : All lower case                                    |
// |                                                                          |
// | Examples:                                                                |
// |                Array : Leading s, (sb = arrary of byte, etc)             |
// |              Pointer : Leading p, (pb = pointer of byte, etc)            |
// ============================================================================
//
//  Date          Who         Action
//  ------------  ----------- -------------------------------------------------
//  29 Sept 2008  Lewis       Initial Version.
//-----------------------------------------------------------------------------
#include "message.h"
#include "constant.h"

//-----------------------------------------------------------------------------
//    Constants
//-----------------------------------------------------------------------------
const struct TRANS_BITMAP KTransBitmap[MAX_TXN_TYPE] = {
  {
    0x0100, {0x30, 0x20, 0x05, 0x80, 0x20, 0xC8, 0x02, 0x04},  /* 0 swiped auth */
    {0x93, 0x00,0x00},0x00, 0x00, AUTH_SWIPE, 0x1, 0x00
  },

  {0x0100, {0x70, 0x24, 0x05, 0x80, 0x00, 0xC0, 0x02, 0x04},  /* 1 manual auth */
		  {0x93, 0x00,0x00},0x00, 0x00,  AUTH_MANUAL, 0x1, 0x00
  },

  {0x0200, {0x30, 0x20, 0x05, 0x80, 0x20, 0xC8, 0x06, 0x0C},  /* 2 swiped sale */
		  {0x93, 0x00,0x00},0x00, 0x00,  SALE_SWIPE, 0x1, 0x00
  },

  {0x0200, {0x70, 0x24, 0x05, 0x80, 0x00, 0xC0, 0x06, 0x0C},  /* 3 manual sale */
		  {0x93, 0x00,0x00},0x00, 0x00,  SALE_MANUAL, 0x1, 0x00
  },

  {0x0200, {0x30, 0x20, 0x05, 0x80, 0x20, 0xC8, 0x02, 0x0C},  /* 4 online refund swipe */
		  {0x93, 0x00,0x00},0x20, 0x00, ONL_REFUND_SW, 0x0, 0x00
  },

  {0x0200, {0x70, 0x24, 0x05, 0x80, 0x00, 0xC0, 0x02, 0x0C},  /* 5 online refund manual */
		  {0x93, 0x00,0x00},0x20, 0x00, ONL_REFUND_MNL, 0x0, 0x00
  },

  {0x0220, {0x70, 0x3C, 0x05, 0x80, 0x04, 0xD0, 0x00, 0x0C},  /* 6 offline refund */
		  {0x93, 0x00,0x00},0x20, 0x00, REFUND, 0x0, 0x80
  },

  {0x0220, {0x70, 0x3C, 0x05, 0x80, 0x04, 0xD0, 0x04, 0x0C},  /* 7 offline sale */
		  {0x93, 0x00,0x00},0x00, 0x00, SALE_OFFLINE, 0x1, 0x80
  },

  {0x0220, {0x70, 0x3C, 0x05, 0x80, 0x04, 0xD0, 0x04, 0x0C},  /* 8 sale completion */
		  {0x93, 0x00,0x00},0x00, 0x06, SALE_COMPLETE, 0x1, 0x80
  },

  {0x0220, {0x70, 0x3C, 0x05, 0x80, 0x04, 0xD0, 0x04, 0x0C},  /* 9 Under Floor Limit Sale */
		  {0x93, 0x00,0x00},0x00, 0x00, SALE_UNDER_LMT, 0x1, 0x80
  },

  {0x0200, {0x70, 0x3C, 0x05, 0x80, 0x08, 0xC0, 0x04, 0x0C},  /* 10 online void */
		  {0x93, 0x00,0x00},0x02, 0x00, VOID, 0x0, 0x00
  },

  {0x0220, {0x70, 0x3C, 0x05, 0x80, 0x0C, 0xC0, 0x04, 0x0C},  /* 11 adjust */
		  {0x93, 0x00,0x00},0x02, 0x00, ADJUST, 0x0, 0x00
  },

  {0x0320, {0x70, 0x3C, 0x05, 0x80, 0x0C, 0xC0, 0x04, 0x1C},  /* 12 transaction upload */
		  {0x93, 0x00,0x00},0x00, 0x00, TRANS_UPLOAD, 0x0,  0x00
  },

  {0x0500, {0x20, 0x20, 0x01, 0x00, 0x00, 0xC0, 0x00, 0x16},  /* 13 settlement - close batch */
		  {0x93, 0x00,0x00},0x92, 0x00, SETTLEMENT, 0x0, 0x00
  },

  {0x0420, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x00, 0x02},  /* 14 reversal : auth-00A000  */
		  {0x00, 0x00,0x00},0x00, 0x00, EDC_REV, 0x0, 0x00
  },

  {0x0200, {0x30, 0x20, 0x05, 0x80, 0x20, 0xC0, 0x06, 0x0C},  /* 15 AEIPS Sale */
		  {0x93, 0x00,0x00},0x00, 0x00, SALE_ICC, 0x1, 0x00
  },

  {0x0100, {0x30, 0x20, 0x05, 0x80, 0x20, 0xC0, 0x06, 0x04},   /* 16 AEIPS Auth */
		  {0x93, 0x00,0x00},0x00, 0x00, AUTH_ICC, 0x1, 0x00
  },

  {0x0220, {0x70, 0x3C, 0x05, 0x80, 0x04, 0xD0, 0x06, 0x0C},   /* 17 AEIPS Under Floor Limit Sale */
		  {0x93, 0x00,0x00},0x00, 0x00, ESALE_UNDER_LMT, 0x1, 0x80
  },

  {0x0220, {0x70, 0x3C, 0x05, 0x80, 0x04, 0xD0, 0x06, 0x0C},   /* 18 AEIPS Sale completion */
		  {0x93, 0x00,0x00}, 0x00, 0x06, ESALE_COMPLETE, 0x1, 0x80
  },

  {0x0800, {0x20, 0x20, 0x01, 0x00, 0x00, 0x80, 0x00, 0x00},   /* 19 test trans */
	{0x93, 0x00,0x00}, 0x99, 0x00, TEST_MSG, 0x00, 0x00
  },

  {0x0800, {0x20, 0x38, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x02},   /* 20 Mensaje Inicial */
    {0x93, 0x00,0x00}, 0x00, 0x00,  INIT, 0x1, 0x00
   },

 {
   0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   /* 21 Retiro */
   {0x31, 0x00,0x00},0x00, 0x00,  RETIRO, 0x3, 0x00
 },

 {
   0x0202, {0x32, 0x38, 0x00, 0x00, 0x0A, 0xC0, 0x00, 0x00},   /* 22 Confirmacion de Retiro */
	{0x31, 0x00,0x00},0x00, 0x00,  CONFIRMACION_RETIRO, 0x5, 0x00
 },

 {
   0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   /* 23 Consulta de Deposito */
    {0x30, 0x00,0x00}, 0x00, 0x00,  CONSULTA_DEPOSITO, 0x8, 0x00
 },

 {
	0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 24 Deposito */
  {0x30, 0x01,0x00}, 0x00, 0x00,  DEPOSITO, 0x6, 0x00
 },

 {
	0x0202, {0x30, 0x38, 0x00, 0x00, 0x0A, 0xC0, 0x00, 0x00},   /* 25 Confirmacion de Deposito */
  {0x30, 0x01,0x00}, 0x00, 0x00,  CONFIRMACION_DEPOSITO, 0x7, 0x00
 },

 {
	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 26 Consulta Pago de Servicio*/
  {0x32, 0x00,0x00},0x00, 0x00,  CONSULTA_PAGO_SERVICIO, 0x10, 0x00
 },

 {
	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 27 Consulta pago de tarjeta credito*/
  {0x35, 0x00,0x00},0x00, 0x00,  CONSULTA_PAGO_TARJETA, 0x10, 0x00
 },

 {
	0x0100, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 28 */
  {0x35, 0x01,0x00},0x00, 0x00,  CONFIRMA_PAGO_TARJETA, 0x10, 0x00
 },

 {
	0x0100, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 29 */
  {0x32, 0x01,0x00},0x00, 0x00,  CONFIRMA_PAGO_SER_N, 0x10, 0x00
 },

 {
	0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   /* 30 */
  {0x35, 0x02,0x00},0x00, 0x00,  EFECTIVACION_PAGO_TARJ, 0x10, 0x00
 },

 {
	0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   /* 31 Pago de servicios*/
  {0x32, 0x02,0x00},0x00, 0x00,  PAGO_SERVICIO, 0x10, 0x00
 },

 {
	0x0202, {0x30, 0x38, 0x00, 0x00, 0x0A, 0xC0, 0x00, 0x00},   /* 32 Confirmacion de pago de servicios*/
  {0x32, 0x02,0x00},0x00, 0x00,  CONFIRMA_PAGO_SERVICIO, 0x10, 0x00
 },

 {
	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x98, 0x02},   /* 33 Cambio de clave*/
  {0x34, 0x00,0x00},0x00, 0x00,  CAMBIO_CLAVE, 0x10, 0x00
 },

 {
	0x0202, {0x30, 0x38, 0x00, 0x00, 0x0A, 0xC0, 0x00, 0x00},   /* 33 Confirmacion Pago de tarjeta credito*/
  {0x35, 0x02,0x00},0x00, 0x00,  CONFIRMACION_PAGO_TARJ, 0x10, 0x00
 },

 {
	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 34 Consulta pago de bono*/
  {0x33, 0x00,0x00},0x00, 0x00,  CONSULTA_PAGO_BONO, 0x10, 0x00
 },

 {
 	0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   /* 35 Efectivacion pago de bono*/
   {0x33, 0x01,0x00},0x00, 0x00,  EFECTIVACION_PAGO_BONO, 0x10, 0x00
  },

  {
 	0x0202, {0x30, 0x38, 0x00, 0x00, 0x0A, 0xC0, 0x00, 0x00},   /* 32 Confirmacion pago de bono*/
   {0x33, 0x01,0x00},0x00, 0x00,  CONFIRMACION_PAGO_BONO, 0x10, 0x00
  },

  {
 	0x0800, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 32 Consulta lote de transacciones*/
   {0x93, 0x01,0x00},0x00, 0x00,  EMISION_CAPA_LOTES, 0x10, 0x00
  },

  {
 	0x0800, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 32 Consulta de transaccion*/
   {0x93, 0x02,0x00},0x00, 0x00,  CONSULTA_COMPROBANTE, 0x10, 0x00
  },
  {
	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 33 Consulta id xperta  203804010060C002*/
  {0x36, 0x00,0x00},0x00, 0x00,  CONSULTA_ID_XPERTA, 0x10, 0x00
 },

 {
 	0x0200, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /* 35 Efectivacion creacion Xperta*/
   {0x36, 0x01,0x00},0x00, 0x00,  EFECTIVACION_CREA_XPERTA, 0x10, 0x00
  },

  {
 	0x0202, {0x20, 0x38, 0x00, 0x00, 0x08, 0xC0, 0x00, 0x00},   /* 32 Confirmacion creacion Xperta*/
   {0x36, 0x01,0x00},0x00, 0x00,  CONFIRMACION_CREA_XPERTA, 0x10, 0x00
  },

  {
 	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},
   {0x37, 0x00,0x00},0x00, 0x00,  CONS_REP_XPERTA, 0x10, 0x00
  },
  
  {
 	0x0200, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},
   {0x37, 0x01,0x00},0x00, 0x00,  EFECT_REP_XPERTA, 0x10, 0x00
  },
  
  {
 	0x0202, {0x20, 0x38, 0x00, 0x00, 0x08, 0xC0, 0x00, 0x00},
   {0x37, 0x01,0x00},0x00, 0x00,  CONF_REP_XPERTA, 0x10, 0x00
  },
  
  {
 	0x0800, {0x20, 0x38, 0x00, 0x00, 0x00, 0xC1, 0x00, 0x02},
   {0x93, 0x03,0x00},0x00, 0x00,  RESUME_TX, 0x10, 0x00
  },

  {
 	0x0800, {0x20, 0x38, 0x00, 0x00, 0x00, 0xC1, 0x00, 0x02},
   {0x93, 0x02,0x00},0x00, 0x00,  REPRINT_DOC, 0x10, 0x00
  },
  
  {
  0x0800, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   /*LF LF*/ //20 38 04 01 00 C1 90 02
  {0x93, 0x04,0x00},0x00, 0x00,  IDENTIF_BP, 0x10, 0x00
  },
  
  // CR 3

  {
  0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},   /*LF LF*/ //20 38 04 01 00 C1 80 02
  {0x32, 0x10,0x00},0x00, 0x00,  CON_REC_DIST, 0x10, 0x00     // CONSULTA  RECAUDO DISTRIBUIDORES
  },

  {
  0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   /*LF LF*/ //30 38 04 01 00 C1 90 02
  {0x32, 0x12,0x00},0x00, 0x00,  PAGO_DIST_EFECTIVO, 0x10, 0x00     // PAGO RECAUDO DISTRIBUIDORES
  },

  {
  0x0202, {0x30, 0x38, 0x00, 0x00, 0x08, 0xC0, 0x00, 0x00},   //30 38 00 00 08 C0 00 00
  {0x32, 0x12,0x00},0x00, 0x00,  CONFIRMA_RECAUDO_DIST, 0x10, 0x00     // PAGO RECAUDO DISTRI CON DEBITO A CUENTA
  },

  {
  0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   //30 38 04 01 00 C1 90 02
  {0x32, 0x20,0x00},0x00, 0x00,  RECARGA, 0x10, 0x00     // RECAUDO RECARGA EN EFECTIVO
  },

  /*{
  0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},   //30 38 04 01 00 C1 90 02
  {0x32, 0x20,0x00},0x00, 0x00,  RECARGA_DEBITO_CUENTA, 0x10, 0x00     // RECAUDO RECARGA CON DEBITO A CUENTA
  },*/

  {
  0x0202, {0x30, 0x38, 0x00, 0x00, 0x08, 0xC0, 0x00, 0x00},   //30 38 00 00 08 C0 00 00
  {0x32, 0x20,0x00},0x00, 0x00,  CONFIRMA_RECARGAS, 0x10, 0x00     // CONFIRMACION RECARGA
  },

  {
 	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},	//	20 38 04 01 00 C1 90 02
   {0x32, 0x00, 0x50},0x00, 0x00,  CONSULTA_VENTA_SEGURO, 0x10, 0x00	//Consulta Venta de Seguros
  },

  {
 	0x0100, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x80, 0x02},	//	30 38 04 01 00 C1 90 02
   {0x32, 0x01, 0x50},0x00, 0x00,  CONSULTA_VENTA_SEGURO_V, 0x10, 0x00	//Consulta Venta de Seguros Variable
  },

  {
 	0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},	//	30 38 04 01 00 C1 90 02
   {0x32, 0x02, 0x50},0x00, 0x00,  PAGO_VENTA_SEGURO, 0x10, 0x00	//Pago Venta de Seguros
  },

  {
 	0x0202, {0x20, 0x38, 0x00, 0x00, 0x08, 0xC0, 0x00, 0x00},	//	30 38 00 00 08 C0 00 00
   {0x32, 0x02, 0x50},0x00, 0x00,  CONFIRMA_VENTA_SEGURO, 0x10, 0x00	//Confirmacion Venta de Seguros
  },

  {
 	0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},	//	30 38 04 01 00 C1 90 02
   {0x32, 0x30, 0x00},0x00, 0x00,  COMPRA_STOCK, 0x10, 0x00		//Compra de Stock
  },

  {
 	0x0202, {0x20, 0x38, 0x00, 0x00, 0x08, 0xC0, 0x00, 0x00},	//	30 38 00 00 08 C0 00 00
   {0x32, 0x30, 0x00},0x00, 0x00,  CONF_COMPRA_STOCK, 0x10, 0x00		//Confirmacion Compra de Stock
  },

  {
 	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC0, 0x90, 0x02},	//	20 38 04 01 00 C0 90 02
   {0x39, 0x01, 0x00},0x00, 0x00,  CONSULTA_COMISION, 0x10, 0x00		//Consulta de Comision
  },

  {
 	0x0100, {0x20, 0x38, 0x04, 0x01, 0x00, 0xC0, 0x90, 0x02},	//	20 38 04 01 00 C0 90 02
   {0x39, 0x02, 0x00},0x00, 0x00,  CONSULTA_COMISION_2, 0x10, 0x00		//Consulta de Comision para ultimos movimientos
  },

  {
 	0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},	//	30 38 04 01 00 C0 90 02
   {0x39, 0x01, 0x01},0x00, 0x00,  CONSULTA_SALDO, 0x10, 0x00		//Consulta de Saldo
  },

  {
 	0x0200, {0x30, 0x38, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02},	//	30 38 04 01 00 C1 90 02
   {0x39, 0x02, 0x01},0x00, 0x00,  CONSULTA_ULT_MOV, 0x10, 0x00		//Consulta de Ultimos Movimientos
  },

  {
  0x0100, {0x20, 0x28, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02}, //  	20 28 04 01 00 C1 90 02
   {0x39, 0x03, 0x00},0x00, 0x00,  CONSULTA_SALDOCNB, 0x10, 0x00   //Consulta de Saldo del CNB
  },

  {
  0x0100, {0x20, 0x28, 0x04, 0x01, 0x00, 0xC1, 0x90, 0x02}, //  	20 28 04 01 00 C1 90 02
   {0x39, 0x04, 0x00},0x00, 0x00,  CONSULTA_ULT_MOV_CNB, 0x10, 0x00   //Consulta de Saldo del CNB
  },


};

const BYTE KSetlPCode2[3] = {0x96,0,0};

const BYTE KTransHeader[] = {
  EDC_CN_AUTH              ,   //0
  EDC_CN_AUTH              ,   //1
  EDC_CN_SALE              ,   //2
  EDC_CN_SALE              ,   //3
  EDC_CN_REFUND            ,   //4
  EDC_CN_REFUND            ,   //5
  EDC_CN_REFUND            ,   //6
  EDC_CN_OFFLINE           ,   //7
  EDC_CN_SALE_COMP         ,   //8
  EDC_CN_SALE              ,   //9
  EDC_CN_VOID              ,   //10
  EDC_CN_ADJUST            ,   //11
  EDC_CN_UPLOAD            ,   //12
  EDC_CN_SETTLE            ,   //13
  EDC_CN_REVERSAL          ,   //14
  EDC_CN_SALE              ,   //15
  EDC_CN_AUTH              ,   //16
  EDC_CN_SALE              ,   //17
  EDC_CN_SALE_COMP         ,   //18
  EDC_CN_TEST_MSG          ,   //19
};

//*****************************************************************************
//  Function        : SaleType
//  Description     : Return TRUE is transaction is define as sale type.
//  Input           : trans;  // transaction id.
//  Return          : TRUE/FALSE;
//  Note            : N/A
//  Globals Changed : N/A
//*****************************************************************************
BOOLEAN SaleType(BYTE aTrans)
{
  return (KTransBitmap[aTrans].b_sale_flag != 0);
}
